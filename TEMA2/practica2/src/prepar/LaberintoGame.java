package prepar;

import java.util.Scanner;
import java.util.Random;

public class LaberintoGame {

    // ูุชุบูุฑุงุช ุนุงูุฉ ูุญุชุงุฌูุง ูู ูู ููุงู
    static char[][] tablero = new char[20][20]; // ุงููุตูููุฉ 20x20
    static int jugadorFila = 0; // ูููุน ุงููุงุนุจ ุงูุญุงูู (ุตู)
    static int jugadorCol = 0;  // ูููุน ุงููุงุนุจ ุงูุญุงูู (ุนููุฏ)
    static int pasos = 0;       // ุนุฏุงุฏ ุงูุฎุทูุงุช

    public static void main(String[] args) {
        Scanner sc = new Scanner(System.in);

        // 1. ุชุฌููุฒ ุงููุนุจุฉ
        inicializarTablero();
        colocarSalida();
        int[] bomba = colocarBomba(); // ูุญุชูุธ ุจููุงู ุงูููุจูุฉ ุณุฑุงู

        // ูุถุน ุงููุงุนุจ ูู ุงูุจุฏุงูุฉ
        tablero[0][0] = '@';

        boolean jugando = true;

        System.out.println("--- ๐โโ๏ธ ูุนุจุฉ ุงููุชุงูุฉ: ุงุจุญุซ ุนู ุงููุฎุฑุฌ # ๐โโ๏ธ ---");

        // 2. ุญููุฉ ุงููุนุจ
        while (jugando) {
            pintarTablero();

            System.out.println("ุฃูู ุชุฑูุฏ ุงูุชุญุฑูุ");
            System.out.println("1. ูููู | 2. ูุณุงุฑ | 3. ุฃุณูู | 4. ุฃุนูู");
            int opcion = sc.nextInt();

            // ุณูุญุงูู ุงูุชุญุฑูุ ููุณุชุฎุฏู try-catch ูุงูุชุดุงู ุงูุฎุฑูุฌ ูู ุงูุญุฏูุฏ
            try {
                // ุฃููุงู: ููุณุญ ููุงู ุงููุงุนุจ ุงููุฏูู ููุญููู ูููุทุฉ
                tablero[jugadorFila][jugadorCol] = '.';

                // ุซุงููุงู: ุชุบููุฑ ุงูุฅุญุฏุงุซูุงุช ุจูุงุกู ุนูู ุงูุงุฎุชูุงุฑ
                if (opcion == 1) jugadorCol++;      // ูููู
                else if (opcion == 2) jugadorCol--; // ูุณุงุฑ
                else if (opcion == 3) jugadorFila++; // ุฃุณูู
                else if (opcion == 4) jugadorFila--; // ุฃุนูู (ูุงุญุธุช ุฎุทุฃ ูู ูุต ุงูุชูุฑูู: ุงูุฎูุงุฑ 4 ููุชูุจ ูููู ูุฑุฉ ุฃุฎุฑูุ ููู ุงูููุทูู ุฃู ูููู ุฃุนูู)

                pasos++; // ุฒูุงุฏุฉ ุงูุฎุทูุงุช

                // ุซุงูุซุงู: ุงูุชุญูู ูุงุฐุง ููุฌุฏ ูู ุงูููุงู ุงูุฌุฏูุฏุ

                // ูุญุต ุงูููุจูุฉ (ูู ุงูููุงู ุงูุฌุฏูุฏ ูู ููุณู ููุงู ุงูููุจูุฉุ)
                if (jugadorFila == bomba[0] && jugadorCol == bomba[1]) {
                    System.out.println("๐ฃ ุจูููู! ููุฏ ุฏุณุช ุนูู ููุจูุฉ ูุฎููุฉ. ุฎุฑุจุช ุงููุนุจุฉ.");
                    jugando = false;
                }
                // ูุญุต ุงูููุฒ (ูู ุงูููุงู ุงูุฌุฏูุฏ ูู ุงููุฎุฑุฌุ)
                else if (tablero[jugadorFila][jugadorCol] == '#') {
                    System.out.println("๐ ูุจุฑูู! ูุฌุฏุช ุงููุฎุฑุฌ!");
                    System.out.println("ุนุฏุฏ ุงูุฎุทูุงุช: " + pasos);
                    jugando = false;
                }
                // ุญุฑูุฉ ุนุงุฏูุฉ
                else {
                    // ูุฑุณู ุงููุงุนุจ ูู ุงูููุงู ุงูุฌุฏูุฏ
                    // ููุงุญุธุฉ: ูุฐุง ุงูุณุทุฑ ูู ุงูุฐู ุณูุฑูู ุงูุฎุทุฃ (Exception) ุฅุฐุง ูุงูุช ุงูุฅุญุฏุงุซูุงุช ุฎุงุฑุฌ ุงูุญุฏูุฏ
                    tablero[jugadorFila][jugadorCol] = '@';
                }

            } catch (ArrayIndexOutOfBoundsException e) {
                // ุฏุฎููุง ููุง ูุนูู ุฃู ุงููุงุนุจ ุญุงูู ุงูุฎุฑูุฌ ูู ุงููุตูููุฉ
                System.out.println("๐ ููุฏ ุณูุทุช ูู ุงููุงููุฉ! ุฎุฑุฌุช ูู ุญุฏูุฏ ุงููุนุจุฉ.");
                jugando = false;
            }
        }
    }

    // ุฏุงูุฉ ูููุก ุงููุตูููุฉ ุจุงูููุงุท ูุงูุฌุฏุฑุงู
    static void inicializarTablero() {
        for (int i = 0; i < 20; i++) {
            for (int j = 0; j < 20; j++) {
                // ุงูุญุฏูุฏ ุงูุนูููุฉ ูุงูุณูููุฉ
                if (i == 0 || i == 19) tablero[i][j] = '-';
                    // ุงูุญุฏูุฏ ุงููุณุฑู ูุงููููู
                else if (j == 0 || j == 19) tablero[i][j] = '|';
                    // ุงููุณุท
                else tablero[i][j] = '.';
            }
        }
    }

    // ุฏุงูุฉ ููุถุน ุงููุฎุฑุฌ # ุนุดูุงุฆูุงู ูู ุงูุญุฏูุฏ
    static void colocarSalida() {
        Random rand = new Random();
        int fila, col;

        do {
            // ูุฎุชุงุฑ ุฅุญุฏุงุซูุงุช ุนุดูุงุฆูุฉ
            fila = rand.nextInt(20);
            col = rand.nextInt(20);

            // ุงูุดุฑุท: ูุฌุจ ุฃู ูููู ูู ุงูุญุฏูุฏ (ุตู 0 ุฃู 19ุ ุฃู ุนููุฏ 0 ุฃู 19)
            // ูุฃู ูุง ูููู ูู ููุทุฉ ุงูุจุฏุงูุฉ (0,0)
            boolean enBorde = (fila == 0 || fila == 19 || col == 0 || col == 19);
            boolean esInicio = (fila == 0 && col == 0);

            if (enBorde && !esInicio) {
                tablero[fila][col] = '#';
                break; // ูุฌุฏูุง ููุงูุงู ููุงุณุจุงูุ ูุฎุฑุฌ ูู ุงูููุจ
            }
        } while (true); // ูุนูุฏ ุงููุญุงููุฉ ุญุชู ูุฌุฏ ููุงูุงู ุตุญูุญุงู
    }


    // ุฏุงูุฉ ููุถุน ุงูููุจูุฉ ุฏุงุฎู ุงูููุญุฉ ูุฅุฑุฌุงุน ุฅุญุฏุงุซูุงุชูุง
    static int[] colocarBomba() {
        Random rand = new Random();
        int fila, col;

        // ุงูููุจูุฉ ูุฌุจ ุฃู ุชููู ูู ุงูุฏุงุฎู (ูู 1 ุฅูู 18) ูุชุชุฌูุจ ุงูุฌุฏุฑุงู
        fila = rand.nextInt(18) + 1;
        col = rand.nextInt(18) + 1;

        // ููุงุญุธุฉ: ูุง ูุถุน ุนูุงูุฉ ููููุจูุฉ ูู ุงููุตูููุฉ ูุชุจูู ูุฎููุฉ
        return new int[]{fila, col};
    }

    // ุฏุงูุฉ ุฑุณู ุงูููุญุฉ
    static void pintarTablero() {
        System.out.println("\n--------------------");
        for (int i = 0; i < 20; i++) {
            for (int j = 0; j < 20; j++) {
                System.out.print(tablero[i][j] + " ");
            }
            System.out.println();
        }
    }
}